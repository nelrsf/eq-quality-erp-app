<ng-template #content let-offcanvas>
	<div class="offcanvas-header">
		<h4 class="offcanvas-title">Administrar elementos</h4>
		<button type="button" class="btn-close" aria-label="Close" (click)="offcanvas.dismiss('Cross click')"></button>
	</div>
	<div class="offcanvas-body">

		<div #createAccordion="ngbAccordion" ngbAccordion class="my-2">
			<div ngbAccordionItem [collapsed]="true">
				<h2 ngbAccordionHeader>
					<button ngbAccordionButton class="text-success">Agregar elemento</button>
				</h2>
				<div ngbAccordionCollapse>
					<div ngbAccordionBody>
						<ng-template>
							<div class="form-group">
								<label for="exampleFormControlInput1">Nombre</label>
								<input [(ngModel)]="newElement.name" type="email" class="form-control"
									id="exampleFormControlInput1">
							</div>
							<div class="form-group mt-3">
								<label for="exampleFormControlSelect1">Tipo de elemento</label>
								<select class="form-control" id="exampleFormControlSelect1"
									[(ngModel)]="newElement.type">
									<option [value]="'path'">Línea</option>
									<option selected [value]="'point'">Punto</option>
								</select>
							</div>
							<div columnSelector class="mt-3" (moduleChange)="setModule($event, newElement)"
								(tableChange)="setTable($event, newElement)"
								(columnChange)="setColumn($event, newElement)"></div>
							<div class="form-group mt-3">
								<label for="exampleFormControlSelect2">Icono</label>
								<div class="card icons-container">
									<button *ngFor="let icon of mapIcons" class="icon-item m-1 p-1"
										(click)="onSelectIcon(newElement,icon)"
										[ngClass]="[icon.id===newElement.icon?'selected-icon':'']">
										<img [src]="icon.url" width="25" height="25" />
									</button>
								</div>

							</div>
							<div class="d-flex justify-content-end mt-3 w-100">
								<button class="btn btn-primary me-2"
									(click)="createMapElement(newElement, createAccordion)">Agregar</button>
							</div>

						</ng-template>
					</div>
				</div>
			</div>

		</div>

		<div ngbAccordion [closeOthers]="true">
			<div *ngFor="let item of mapElements; let i=index" ngbAccordionItem [collapsed]="true">
				<h2 ngbAccordionHeader>
						<button ngbAccordionButton  class="d-inline-flex">
							<div class="ms-2 d-inline-flex align-items-center">
								<img [src]="getButtonIcon(item.icon)" width="25" height="25"/>
							</div>
							<div class="ms-2 d-inline-flex">
								{{item.name}}
							</div>
						</button>
				</h2>
				<div ngbAccordionCollapse>
					<div ngbAccordionBody>
						<ng-template>
							<div class="form-group">
								<label for="exampleFormControlInput1">Nombre de elemento</label>
								<input type="email" class="form-control" id="exampleFormControlInput1"
									[(ngModel)]="item.name">
							</div>
							<div class="form-group mt-3">
								<label for="exampleFormControlSelect1">Tipo de elemento</label>
								<select class="form-control" id="exampleFormControlSelect1" [(ngModel)]="item.type">
									<option [selected]="item.type==='path'" [value]="'path'">Línea</option>
									<option [selected]="item.type==='point'" [value]="'point'">Punto</option>
								</select>
							</div>
							<div columnSelector class="mt-3" [data]="setSelectorData(item)"
								(moduleChange)="setModule($event, item)" (tableChange)="setTable($event, item)"
								(columnChange)="setColumn($event, item)"></div>
							<div class="form-group mt-3">
								<label for="exampleFormControlSelect2">Icono</label>
								<div class="card icons-container">
									<button *ngFor="let icon of mapIcons" class="icon-item m-1 p-1"
										(click)="onSelectIcon(item,icon)"
										[ngClass]="[icon.id===item.icon?'selected-icon':'']">
										<img [src]="icon.url" width="25" height="25" />
									</button>
								</div>

							</div>
							<div class="d-flex justify-content-end mt-3 w-100">
								<button class="btn btn-primary me-2" (click)="saveMapElement(item)">Guardar</button>
								<button class="btn btn-danger me-2" (click)="deleteMapElement(item)">Eliminar</button>
							</div>

						</ng-template>
					</div>
				</div>
			</div>

		</div>

	</div>
</ng-template>

<button class="btn btn-outline-primary mb-2 me-2 mt-2 button-control" (click)="openEnd(content)">
	<fa-icon [icon]="icons.config"></fa-icon>
</button>

<button *ngFor="let mapElement of mapElements" class="icon-item me-2 button-control" (click)="insertMarker(mapElement)">
	<img [src]="getButtonIcon(mapElement.icon)" width="25" height="25" />
</button>